(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/dead-error.d208d3f9.svg"},,,function(e,t,a){e.exports=a(40)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),o=a.n(s),i=(a(18),a(1)),c=a(2),l=a(4),u=a(3),m=a(5),f=(a(19),a(11)),d=(a(20),a(21),a(22),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={term:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search"},r.a.createElement("form",{role:"search","aria-label":"Search at Google Books",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{title:"Type your search term",className:"search__input",type:"text",spellCheck:"false","aria-required":"false",placeholder:"Type your search term..",value:this.state.term,onChange:function(t){return e.setState({term:t.target.value})},onKeyUp:function(t){"Enter"===t.key&&e.handleSubmit(t)}}),r.a.createElement("button",{type:"submit",title:"Press to search for books",className:"search__btn"},r.a.createElement("i",{className:"fas fa-search"}))))}},{key:"handleSubmit",value:function(e){this.props.getBooks(this.state.term),e.preventDefault()}}]),t}(n.Component)),h=(a(23),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"searchbar"},r.a.createElement(d,this.props))}}]),t}(n.Component));a(24);function b(){return r.a.createElement("div",{className:"logo"},r.a.createElement("i",{className:"fas fa-book"}),"Goobo")}var k=r.a.createContext({ids:[],books:{},size:0,total:0,order:"asc",filters:[],filter:null,term:"",current:null,actions:{getBooks:function(){},changeCurrent:function(){},filterBooks:function(){},sortBooks:function(){}}});function v(){return r.a.createElement("div",{className:"top"},r.a.createElement(b,null),r.a.createElement(k.Consumer,null,function(e){var t=e.actions.getBooks;return r.a.createElement(h,{getBooks:t})}))}a(25),a(26),a(27),a(28);function E(e){var t=e.rating,a=t?20*t:0;return r.a.createElement("div",{className:"rating",title:"Book rating: "+(t||"0 ")+" stars"},r.a.createElement("div",{className:"rating-wrap"},r.a.createElement("span",{className:"stars-active",style:{width:"".concat(a,"%")}},r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"})),r.a.createElement("span",{className:"stars-inactive"},r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"}))))}function p(e){if(e.current){var t=e.current,a=t.year,n=t.thumbnail,s=t.title,o=t.subtitle,i=t.authors,c=t.description,l=t.rating,u=t.previewLink,m=i&&i.map(function(e,t){return r.a.createElement("div",{className:"book-preview__author",key:t},e)});return r.a.createElement("div",{className:"book-preview",tabIndex:"0"},r.a.createElement("span",{className:"book-preview__year"},a),r.a.createElement("img",{className:"book-preview__preview",src:n||"".concat(window.location.origin,"/notfound.png"),alt:s}),r.a.createElement("span",{className:"book-preview__preview-link"},r.a.createElement("a",{href:u,title:"Go to preview at Google Books",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fas fa-external-link-alt"}))),r.a.createElement("h1",{className:"book-preview__title","aria-label":"Book Title"},s,r.a.createElement("small",{"arial-level":"2"},o)),r.a.createElement("div",{className:"book-preview__authors"},m),r.a.createElement("div",{className:"book-preview__rating"},r.a.createElement(E,{rating:l})),r.a.createElement("div",{className:"book-preview__description"},c))}return r.a.createElement("p",{className:"no-book-preview"},"No Book Selected")}a(29);var g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={active:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.f,n=t.ami,s=t.filterBooks;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"sidebar__books-filters__filter"+(n?" sidebar__books-filters__filter--active":"")},r.a.createElement("a",{title:n?"Click again to unselect me":"Click to select me",href:"#click",onClick:function(t){var r=!(e.state.active&&n);e.setState({active:r}),t.preventDefault(),s(r?a:null)}},a)))}}]),t}(n.Component);function N(e){return r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle-notch fa-spin"})," ",e.message||"Loading...")}function y(e){var t=e.filter,a=e.filters,n=e.filterBooks;return r.a.createElement("div",{className:"sidebar__books-filters-container"},r.a.createElement("h4",{tabIndex:"0","aria-label":"List with years filter, navigate with keyboard and hit neter to select one."},r.a.createElement("i",{className:"fas fa-filter"})," Show only"),r.a.createElement("ul",{className:"sidebar__books-filters"},a.length>0&&a.map(function(e){return r.a.createElement(g,Object.assign({key:e},{f:e,ami:t===e,filterBooks:n}))})||r.a.createElement(N,{message:"Loading filters..."})))}function _(){return r.a.createElement(k.Consumer,null,function(e){var t=e.filter,a=e.filters,n=e.actions.filterBooks,s=e.current;return r.a.createElement("aside",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__books-filters-list"},r.a.createElement(y,{filter:t,filters:a,filterBooks:n})),r.a.createElement("div",{className:"sidebar__book-preview"},r.a.createElement(p,{current:s})))})}a(30),a(31);function w(e){var t=e.authors,a=null;return t&&t.length>0&&(a=e.authors[0],a+=t.length>=2?" +".concat(e.authors.length-1):""),a?r.a.createElement(r.a.Fragment,null,a):null}function j(e){var t=e.id,a=e.title,n=e.authors,s=e.year,o=e.rating,i=e.thumbnail;return r.a.createElement("div",{className:"book",tabIndex:"0"},r.a.createElement("span",{className:"book__year"},s),r.a.createElement("img",{className:"book__preview",src:i||"".concat(window.location.origin,"/notfound.png"),alt:a,onClick:function(){e.onSelect(t)}}),r.a.createElement("h2",{className:"book__title"},a),r.a.createElement("div",{className:"book__authors"},r.a.createElement(w,{authors:n})),r.a.createElement("div",{className:"book__rating"},r.a.createElement(E,{rating:o})),r.a.createElement("div",{className:"book__footer"}))}a(32),a(33);var O=a(9),B=a.n(O);function S(e){return r.a.createElement("section",{className:"error-screen"},r.a.createElement("img",{className:"error-screen__img",src:B.a,alt:e.message}),r.a.createElement("p",null,e.message))}var C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={books:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(k.Consumer,null,function(e){var t=e.error,a=e.ids,n=e.books,s=e.total,o=e.actions.changeCurrent;return t?r.a.createElement(S,{message:t.message}):r.a.createElement("section",{className:"books-list"},s>0?a.map(function(e){return r.a.createElement(j,Object.assign({key:e},n[e],{onSelect:function(e){return o(e)}}))}):r.a.createElement(N,{message:"Searching books..."}))})}}]),t}(n.Component);a(34);function x(e){var t=e.order,a=e.sortBooks;return r.a.createElement("div",{className:"sort-by"},r.a.createElement("button",{"aria-label":"asc"===t?"ordered ascendant, click to order in descendant order.":"ordered descendant, click to order in ascendant order.",className:"sort-by__btn sort-by__btn--"+t,onClick:function(){return a("asc"===t?"desc":"asc")}},r.a.createElement("i",{className:"fas fa-calendar-alt"})," ","asc"===t?r.a.createElement("i",{className:"fas fa-sort-amount-down"}):r.a.createElement("i",{className:"fas fa-sort-amount-up"})))}a(35);function I(e){return r.a.createElement("span",{className:"total"},"Displaying ",e.size," books for \xa0",r.a.createElement("strong",null,'"',e.term,'"'))}a(36);function z(){return r.a.createElement(k.Consumer,null,function(e){var t=e.total,a=e.size,n=e.order,s=e.term,o=e.actions.sortBooks;return r.a.createElement("section",{className:"books-toolbar"},r.a.createElement(I,{total:t,size:a,term:s}),r.a.createElement(x,{order:n,sortBooks:o}))})}a(37);function L(){return r.a.createElement("section",{className:"books-footer"},"This is for demostration purspose only using free access to Google Books API ",r.a.createElement("i",{className:"fas fa-smile-wink"}))}function T(){return r.a.createElement("div",{className:"content"},r.a.createElement("aside",{className:"aside"},r.a.createElement(_,null)),r.a.createElement("article",{className:"article"},r.a.createElement(z,null),r.a.createElement(C,null),r.a.createElement(L,null)))}var D=a(6),G=a.n(D),A=a(10),P=function(){function e(){Object(i.a)(this,e),this.url="https://www.googleapis.com/books/v1/volumes?q="}return Object(c.a)(e,[{key:"getBooks",value:function(){var e=Object(A.a)(G.a.mark(function e(t,a){var n,r,s,o,i,c,l,u,m;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"},e.next=3,fetch("".concat(this.url).concat(t,"&maxResults=40&orderBy=newest&startIndex=0"),n).then(function(e){return e.json()});case 3:if((r=e.sent).items&&0!==r.items.length){e.next=6;break}throw new Error("No books found, try with another search term.");case 6:for(s={},o=new Set,i=new Set,c=0;c<r.items.length;c++)l=r.items[c],u=l.id,o.add(u),(m=this.createSimpleBook(l)).year&&i.add(m.year),s[u]=m;return o=Array.from(o),e.abrupt("return",{ids:o,books:s,size:o.length,total:r.totalItems,filters:Array.from(i).sort(),current:s[o[0]]});case 12:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"createSimpleBook",value:function(e){var t=e.id,a=e.volumeInfo,n=a.title,r=a.subtitle,s=a.authors,o=a.description,i=a.publishedDate,c=a.averageRating,l=a.imageLinks,u=a.previewLink,m=l?l.smallThumbnail:null;return{id:t,title:n,subtitle:r,authors:s,description:o,year:i&&i.split("-")[0],rating:c,thumbnail:m,previewLink:u}}}]),e}(),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement(S,{message:this.state.error&&this.state.error.toString()}):this.props.children}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={ids:[],books:{},size:0,total:0,order:"asc",filters:[],filter:null,term:"game of thrones",current:null,actions:{getBooks:function(e){return a.getBooks(e)},changeCurrent:function(e){return a.changeCurrent(e)},filterBooks:function(e){return a.filterBooks(e)},sortBooks:function(e){return a.sortBooks(e)}},error:null},a.service=new P,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getBooks(this.state.term)}},{key:"render",value:function(){return r.a.createElement("main",{className:"main-page"},r.a.createElement(k.Provider,{value:this.state},r.a.createElement(v,null),r.a.createElement(q,null,r.a.createElement(T,null))))}},{key:"changeCurrent",value:function(e){this.setState({current:this.state.books[e]})}},{key:"getBooks",value:function(e){var t=this;e?(this.setState({term:e}),this.setState({total:0}),this.service.getBooks(e).then(function(e){t.setState(Object(f.a)({},e)),t.original={ids:e.ids}}).catch(function(e){t.setState({size:0,error:e})})):this.setState({size:0,error:{message:"Search term can not be empty."}})}},{key:"filterBooks",value:function(e){var t=this;if(this.state.size>0){var a=this.original.ids.filter(function(a){var n=t.state.books[a];return n.year&&(n.year===e||null===e)});this.setState({ids:a,size:a.length,current:this.state.books[a[0]],filter:e})}}},{key:"sortBooks",value:function(e){this.setState({order:e});var t=this.state.ids,a=Object.values(this.state.books).filter(function(e){return t.includes(e.id)});a.sort(function(t,a){return"asc"===e?t.year>a.year?-1:1:t.year<a.year?-1:1}),t=a.map(function(e){return e.id}),this.setState({ids:t})}}]),t}(n.Component),J=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.5cca6af1.chunk.js.map